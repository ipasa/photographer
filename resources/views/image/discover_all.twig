{% extends 'templates/app.twig' %}

{% block content %}
    <script>
        function loadDoc() {
            var category_id =   document.getElementById("image_category_data").value;

            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function() {

                if (xhttp.readyState == 4 && xhttp.status == 200) {
                    //alert(xhttp.responseText);
                    document.getElementById("demo").innerHTML = xhttp.responseText;
                }
            };
            xhttp.open("GET", "http://localhost/authentication/public/image/discoverByCategory?category_id="+category_id, true);
            xhttp.send();
        }
    </script>

    <section class="section white border-top nopaddingbottom2">

        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="custom-title text-center wow fadeIn">
                        <h2>Category -
                            <mark>{{ category_name.category_name}}</mark>
                        </h2>
                    </div><!-- end custom-title -->
                </div><!-- end col -->
            </div><!-- end row -->

            <div class="row">
                <div class="col-md-6">
                    <div class="text-left">
                        <nav class="portfolio-filter">
                            <ul class="list-inline">
                                <li><a href="#" class="active">POPULER</a></li>
                                <li><a href="#">UPCOMING</a></li>
                                <li><a href="#">FRESH</a></li>
                            </ul>
                        </nav>
                    </div><!-- end text-center -->
                </div>

                <div class="col-md-2 col-md-offset-4">
                    <div class="text-right">
                        <div class="select_wrap">
                            <select name="image_category" id="image_category_data" class="form-control" onchange="loadDoc()">
                                {% for category in categoryList.categories %}
                                    <option value="{{ category.id }}">{{ category.category_name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div><!-- end text-center -->
                </div>
            </div>

        </div><!-- end container -->

        <div class="container-full">
            <div id="gallery" class="row">
                <div id="fourcol" class="portfolio">
                    {% for image in images %}
                        <div class="box entry item-w1 item-h1 cat1">
                            <img src="{{ base_url() }}/upload_image/{{ image.image_link }}" alt="" class="img-responsive">
                            <div class="magnifier">
                                <div class="visible-buttons">
                                    <h4><a href="{{ path_for('singleimage', {'id': image.id}) }}">{{ image.image_title }}</a></h4>
                                    <p>{{ image.image_description }}</p>
                                </div>
                            </div>
                        </div><!-- end box -->
                    {% endfor %}

                </div><!-- end portfolio -->
            </div><!-- end gallery -->
        </div><!-- end container-fluid -->
    </section><!-- end section -->

{% endblock %}